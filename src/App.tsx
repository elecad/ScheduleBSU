import '@/styles/index.css'import Drawer from "@/components/ui/Drawer/Drawer.tsx";import MobileBar from "@/components/ui/MobileBar/MobileBar.tsx";import DesktopLogo from "@/components/schedule/DesktopLogo/DesktopLogo.tsx";import {CSSProperties, useCallback, useEffect, useState} from "react";import Card from "@/components/ui/Card/Card.tsx";import Button from "@/components/ui/Button/Button.tsx";import classNames from "classnames";import Content from "@/components/ui/Content/Content.tsx";import {ILesson, useSchedule} from "@/hooks/useShedule.ts";import ExpansionPanel from "@/components/ui/ExpansionPanel/ExpansionPanel.tsx";import LessonHeader from "@/components/schedule/LessonHeader/LessonHeader.tsx";import WeekPanel from "@/components/schedule/WeekPanel/WeekPanel.tsx";import LessonContent from "@/components/schedule/LessonContent/LessonContent.tsx";import Autocomplite from "@/components/schedule/Autocomplite/Autocomplite.tsx";import NotLesson from "@/components/schedule/NotLesson/NotLesson.tsx";import ScheduleHeader from "@/components/schedule/ScheuleHeader/ScheduleHeader.tsx";type AppTheme = "light" | "dark";const styleDrawerElement: CSSProperties = {    marginTop: "20px",    marginBottom: "20px",}const styleDayHeader: CSSProperties = {    backgroundColor: "#3f51b5",    color: "white",    padding: "15px 25px",    marginBottom: "10px",    fontWeight: 600,    display: "flex",    alignItems: "center",    justifyContent: "space-between",    position: "sticky"}const styleNameDayLabel: CSSProperties = {    fontSize: "1rem"}const styleDateDayLabel: CSSProperties = {    fontSize: "0.85rem"}const styleCurrentDay: CSSProperties = {    position: "absolute",    width: "10px",    height: "10px",    backgroundColor: "white",    borderRadius: "50%",    left: "10px",    top: "19.5px"}const styleButtonList: CSSProperties = {display: "flex", flexWrap: "wrap", rowGap: "4px", columnGap: "4px"}function App() {    const [theme, setTheme] = useState<AppTheme>("light")    const {lesson, getLesson, findUpdateTime, date} = useSchedule()    const [panelObject, setPanelObject] = useState({group: -1, position: -1})    function openPanels(newPanel: { group: number, position: number }) {        const {group: newGroup, position: newPosition} = newPanel        const {group: currentGroup, position: currentPosition} = panelObject        if (currentGroup == newGroup && currentPosition == newPosition) {            setPanelObject({group: -1, position: -1})        } else {            setPanelObject(newPanel)        }    }    useEffect(() => {        getLesson()    }, [])    const themeClickHandler = useCallback(() => {        const newTheme: AppTheme = theme == 'light' ? 'dark' : 'light'        setTheme(newTheme)    }, [theme])    useEffect(() => {        findUpdateTime()    }, [lesson]);    function isNowLesson(l: ILesson) {        const isCurrentDay = l.start.toLocaleDateString() == date.toLocaleDateString();        return isCurrentDay && l.start.getTime() < date.getTime() && date.getTime() < l.end.getTime()    }    function isTodayLesson(l: ILesson) {        return !isNowLesson(l) && l.start.toLocaleDateString() == date.toLocaleDateString();    }    return (        <div className={classNames('app', theme)}>            <MobileBar>                <DesktopLogo></DesktopLogo>            </MobileBar>            <Drawer>                <DesktopLogo style={styleDrawerElement}></DesktopLogo>                <Autocomplite/>                <Card style={styleDrawerElement}>                    <div className={'header'}>Debug-функции</div>                    <div style={styleButtonList}>                        <Button onClick={themeClickHandler}>Сменить тему</Button>                    </div>                </Card>            </Drawer>            <Content>                <ScheduleHeader name={"Группа 12002331"}></ScheduleHeader>                <div className={classNames('lesson-list')}>                    {lesson.map((el, index) => {                        return <div key={+el.date}>                            <Card                                style={styleDayHeader}>                                {el.date.toLocaleDateString() == date.toLocaleDateString() &&                                    <div style={styleCurrentDay}></div>}                                <div style={styleNameDayLabel}>{el.name}</div>                                <div style={styleDateDayLabel}>{el.date.toLocaleDateString()}</div>                            </Card>                            {                                el.lesson.length ?                                    el.lesson.map((l, j) =>                                        <ExpansionPanel open={panelObject.group == index && panelObject.position == j}                                                        onOpen={() => {                                                            openPanels({group: index, position: j})                                                        }}                                                        className={classNames({"today": isTodayLesson(l)}, {"now": isNowLesson(l)})}                                                        headerPanel={<LessonHeader lesson={l}                                                                                   open={panelObject.group == index && panelObject.position == j}/>}                                                        contentPanel={<LessonContent lesson={l}/>}                                                        style={{marginBottom: '10px'}} key={`${index}-${j}`}/>                                    ) : <NotLesson></NotLesson>                            }                        </div>                    })}                </div>            </Content>            <WeekPanel days={lesson}></WeekPanel>        </div>    )}export default App